# 메모리 영역

## Code 영역

* 작성한 소스코드 자체를 구성하는 메모리 영역, Hex파일이나 BIN 파일 메모리
* 텍스트 영역이라고도 부름
* 프로그램 명령(함수, 제어문, 상수)이 위치하는 곳으로, 기계어로 제어되는 메모리 영역
* 컴파일 시 크기가 결정



## Data 영역

* 전역변수(global), 정적변수(static), 배열(array), 구조체(structure) 등이 저장됨
  * 초기화 된 데이터는 Data 영역에 저장됨
  * 초기화 되지 않은 데이터는 BSS(`Block Stated Symbol`) 영역에 저장됨
* 프로그램이 실행될 때 생성되고 프로그램이 종료되면 시스템에 반환됨
* 함수 내부에 선언된 static 변수는 프로그램이 실행될 때 공간만 할당되고, 그 함수가 실행될 때 초기화 됨
* 컴파일 시 크기가 결정



## Heap 영역

* 필요에 의해 동적으로 프로그래머가 할당/해제하는 메모리 공간
* 메모리 주소 값에 의해서만 참조되고 사용됨
* Java에서는 가비지 컬렉터가 자동으로 해제함
* 데이터를 저장하기 위에서 C는 `malloc()`, C++은 `new()` 함수 사용
* 이 공간에 메모리 할당을 하는 것을 동적 할당(`Dynamic Memory Allocation`)
* 클래스, 클로저가 이 부분에 해당됨
* 런타임 시에 크기가 결정됨
* Stack에서 pointer 변수를 할당하고 그 pointer가 가리키는 Heap 영역의 임의의 공간부터 원하는 크기 만큼 할당해 사용함



## Stack 영역

* 프로그램이 자동으로 사용하는 임시 메모리 영역
* 함수 호출 시 생성되는 지역(local) 변수와 매개변수(parameter)가 저장되는 영역
* 함수 호출의 완료되면 사라짐
* 스택 사이즈는 각 프로세스마다 할당되지만 프로세스가 메모리에 로드될 때 스택 사이즈가 고정되어 있어, 런타임 시에 스택 사이즈를 바꿀 수는 없음
* 런타임 시 크기가 결정



* 힙과 스택은 사실 같은 공간을 공유함. 힙이 메모리 위쪽 주소부터 할당되면 스택은 아래 쪽부터 할당됨. 그래서 각 영역이 상대 공간을 침범하는 일이 발생할 수 있는데 이를 heal overflow, stack overflow라고 부름












# 인터넷 네트워크 (`Internet Network`)

## 인터넷 통신

* 클라이언트와 서버 통신 사이에 '인터넷'이 존재함.



## IP (인터넷 프로토콜)

* IP 주소를 부여하여 서로 간의 통신을 할 수 있음. 
* 역할 : 지정한 IP 주소(`IP Address`)에 패킷(`Packet`)이라는 통신 단위로 데이터 전달
* 패킷에 출발지와 목적지 주소, 전송 데이터를 넣고 보냄.

### IP 프로토콜의 한계

* **비연결성**
  * 패킷을 받을 대상이 없거나 서비스 불능 상태여도 패킷을 전송함.
  * 대상 서버의 상태를 알 수 없음.
* **비신뢰성**
  * 중간에 패킷이 사라져도 알 수 없음.
  * 패킷이 사이즈가 커서 쪼개서 보냈는데 순서대로 안 올 수 있음.
* **프로그램 구분**
  * 같은 IP를 사용하는 서버에서 통신하는 애플리케이션이 둘 이상이면?



## TCP

> IP 프로토콜의 한계를 해결하기 위해 등장함.

### 인터넷 프로토콜 스택의 4계층

![](https://user-images.githubusercontent.com/12438429/104607023-b75f0000-56c3-11eb-89b8-5d4e94768225.png)



> 1. 애플리케이션에서 메시지를 생성.
> 2. SOCKET 라이브러리를 통해 전달.
> 3. OS 계층에서 TCP 정보를 생성해서 메시지 데이터를 넣음. 
> 4. IP 패킷을 생성해서 TCP 데이터를 넣음.
> 5. 네트워크 인터페이스, 즉 LAN 카드를 통해 나갈 때 `Ethernet frame(LAN카드에 포함된 Mac 주소 등 물리적 정보)` 이 포함됨.



*  **IP 패킷 정보** : 출발지 IP, 목적지 IP, 데이터 정보 등
* **TCP 정보** : 출발지 PORT, 목적지 PORT, 전송 제어, 순서, 검증 정보 등



### TCP 특징

> 전송 제어 프로토콜(`Transmission Control Protocol`)

* **연결 지향** - TCP 3 way handshake (가상 연결) : 연결이 완료된 후에 데이터를 전송함.
* **데이터 전달 보증** : 패킷이 누락된 것을 알 수 있음.
* **순서 보장**
* 신뢰할 수 있는 프로토콜
* 현재 대부분 TCP 사용



### TCP 3 way handshake

![](https://user-images.githubusercontent.com/12438429/104607948-b5e20780-56c4-11eb-9357-31078b240ec5.png)

> `SYN(synchronize sequence numbers)` : 접속 요청 / `ACK(acknowledgements)` : 요청 수락
>
> 1. SYN : 클라이언트에서 서버로 `SYN` 메시지를 보냄.
> 2. SYN + ACK : 서버에서 클라이언트로 알겠다고 `ACK` 메시지와 나도 연결해달라는 `SYN` 메시지를 보냄.
> 3. ACK : 클라에서 서버로 알겠다고 `ACK` 메시지를 보냄.
> 4. 연결이 모두 된 후에 데이터를 전송함.

* 3. ACK와 함께 데이터 전송 가능함.
* 논리적으로 연결이 된 것임. 실제 물리적 연결이 된 것은 아님.
* 비교적 데이터 양이 크고, 느림. 



### 데이터 전달 보증

* 클라에서 서버로 데이터 전송을 하면, **서버가 데이터를 잘 받았다고 클라에게 응답**을 해줌.
* 응답이 없다면 무언가 문제가 생긴 것을 알 수 있음.



### 순서 보장

* 전송하는 **패킷에 번호를 붙혀서** 잘못된 순서의 패킷부터 다시 보내라고 함.



### UDP 특징

> 사용자 데이터그램 프로토콜(`User Datagram Protocol`)

* 기능이 거의 없음
* **데이터 전달 및 순서가 보장되지 않지만, 단순하고 빠름**.
* IP와 거의 같음. +PORT(패킷이 전송될 애플리케이션을 구분할 수 있음) +체크섬(메시지 검증) 정도만 추가됨.
* 애플리케이션에서 추가 작업이 필요함.
* HTTP/3 에서는 UDP 프로토콜을 사용함.



## PORT

> 한번에 둘 이상을 연결해야 한다면? => 같은 IP 내에서 프로세스 구분

* IP 주소는 목적지 서버를 찾는 것. PORT는 **그 서버 안에서 어플리케이션을 찾는 것**.
* 0 ~ 65535 : 할당 가능
* 0 ~ 1023 : 잘 알려진 포트, 사용하지 않는 것이 좋음.
  * FTP : 20, 21
  * TELNET : 23
  * HTTP : 80
  * HTTPS : 443



## DNS (`Domain Name System`)

> * IP는 기억하기 어렵다.
> * IP는 변경될 수 있다.

* 전화번호부 같음.
* 도메인명을 IP 주소로 변환

![](https://user-images.githubusercontent.com/12438429/104618410-0317a680-56d0-11eb-8e99-350cc374c0e5.png)





[출처 : Inflearn - 모든 개발자를 위한 HTTP 웹 기본 지식](https://www.inflearn.com/course/http-%EC%9B%B9-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC/dashboard)